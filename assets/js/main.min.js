if("undefined"!=typeof jQuery)pvtmed_assets_fix();else{var jquery=document.getElementById("pvtmed-tinyMCE-script-0");jquery.onload=pvtmed_assets_fix}function pvtmed_assets_fix(){jQuery(document).ready(function(a){function s(e){var t,r;e.hasClass("pvtmed-checked")||(-1!==e.attr("src").indexOf(Pvtmed.privateUrlBase)?(t=Pvtmed.privateUrlBase,r=new RegExp(t,"g"),Pvtmed.isAdmin&&window.alert(Pvtmed.brokenMessage+e.attr("src")),console.log("Private Media plugin - Attempting to fix broken media "+e.attr("src")),e.attr("src",e.attr("src").replace(r,Pvtmed.publicUrlBase)),e.is("[srcset]")&&e.attr("srcset",e.attr("srcset").replace(r,Pvtmed.publicUrlBase)),console.log("Private Media plugin - Broken private media source changed to public source "+e.attr("src"))):-1!==e.attr("src").indexOf(Pvtmed.publicUrlBase)&&(t=Pvtmed.publicUrlBase,r=new RegExp(t,"g"),Pvtmed.isAdmin&&window.alert(Pvtmed.brokenMessage+e.attr("src")),console.log("Private Media plugin - Attempting to fix broken media "+e.attr("src")),e.attr("src",e.attr("src").replace(r,Pvtmed.privateUrlBase)),e.is("[srcset]")&&e.attr("srcset",e.attr("srcset").replace(r,Pvtmed.privateUrlBase)),console.log("Private Media plugin - Broken public media source changed to private source "+e.attr("src"))));e.addClass("pvtmed-checked")}a("img").each(function(e,t){var r=a(t);a("<img/>").on("error",function(){s(r)}).attr("src",r.attr("src"))}),a("video").on("error",function(){s(a(this))}),a("audio").on("error",function(){s(a(this))})})}